// Generated by CoffeeScript 1.9.3
(function() {
  "use strict";
  var CardViewModule, Dreamhorn, ViewModule, When, _, assert, dom,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  _ = require('lodash');

  When = require('when');

  dom = require('./dom');

  assert = require('./assert');

  Dreamhorn = require('./dreamhorn');

  ViewModule = require('./mod-view');

  CardViewModule = (function(superClass) {
    extend(CardViewModule, superClass);

    function CardViewModule() {
      this.on_deactivate = bind(this.on_deactivate, this);
      return CardViewModule.__super__.constructor.apply(this, arguments);
    }

    CardViewModule.prototype.defaults = {
      template: '<div class="card card--{{ deck.name }} shadow--2dp" id="card-{{ deck.name }}-{{ card.id }}">\n  {{#if header}}\n  <div class="card__header card--{{ deck.name }}__header">\n    {{{ header }}}\n  </div>\n  {{/if}}\n  <div class="card__main card--{{ deck.name }}__main">\n    {{{ content }}}\n  </div>\n  {{#if choices}}\n  <div class="card__choices card--{{ deck.name }}__choices">\n    {{{ choices }}}\n  </div>\n  {{/if}}\n</div>'
    };

    CardViewModule.prototype.events = {};

    CardViewModule.prototype.get_context = function() {
      var card;
      card = this.options.card;
      return When.join(this.will_get_header(card), this.will_get_content(card), this.will_get_choices(card)).then((function(_this) {
        return function(arg) {
          var choices, content, header;
          header = arg[0], content = arg[1], choices = arg[2];
          return {
            deck: _this.deck,
            card: card,
            header: header,
            content: content,
            choices: choices
          };
        };
      })(this));
    };

    CardViewModule.prototype.will_get_header = function(card) {
      return When(card.will_get_header(this.options, this.deck)).then((function(_this) {
        return function(header) {
          return _this.convert_to_markdown(header);
        };
      })(this));
    };

    CardViewModule.prototype.will_get_content = function(card) {
      return When(card.will_get_content(this.options, this.deck)).then((function(_this) {
        return function(content) {
          return _this.convert_to_markdown(content);
        };
      })(this));
    };

    CardViewModule.prototype.will_get_choices = function(card) {
      return When(card.will_get_choices(this.options, this.deck)).then((function(_this) {
        return function(choices) {
          return choices;
        };
      })(this));
    };

    CardViewModule.prototype.setup = function() {
      return this.deck.on('card:deactivate-all', this.on_deactivate);
    };

    CardViewModule.prototype.teardown = function() {
      dom.wrap(this.el).empty();
      return this.deck.off('card:deactivate-all', this.on_deactivate);
    };

    CardViewModule.prototype.on_deactivate = function() {};

    return CardViewModule;

  })(ViewModule);

  module.exports = CardViewModule;

}).call(this);

//# sourceMappingURL=mod-card-view.js.map
